## ğŸ¤”Â Delegate íŒ¨í„´

ì„œë¡œ ë‹¤ë¥¸ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì— ë™ì¼í•œ ì €ì¥ì†Œ(class)ë¡œ dataë¥¼ ì—°ê²°í•˜ë ¤ê³  í–ˆë‹¤.

ì²˜ìŒ ì‹œë„í•œ ë°©ë²•ì€ ì €ì¥ì†Œì— ì‹±ê¸€í„´ íŒ¨í„´ì„ ì ìš©í•˜ì—¬ ì´ë¯¸ ìƒì„±ëœ ê°ì²´ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ì±„íƒí–ˆë‹¤.

í•˜ì§€ë§Œ ì´ ê²½ìš° ì–´ë””ì„œë‚˜ ì ‘ê·¼ ê°€ëŠ¥í•œ ì˜ì¡´ì„± ë¬¸ì œì™€ ë”ë¶ˆì–´ í…ŒìŠ¤íŠ¸ì— ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í•œë‹¤.

ê·¸ë˜ì„œ ë²„ë“œì˜ ì¡°ì–¸ì„ ë°›ì•„ Delegate íŒ¨í„´ì„ ì ìš©í•´ ë³´ì•˜ë‹¤.

1. í”„ë¡œí† ì½œ ìƒì„±

```swift
protocol StockViewControllerDelegate: AnyObject {
    func stockViewController(_ stockViewController: StockViewController, didUpdateFruit: FruitStore)
}
```

1. í™”ë©´ ì´ë™ ë° ì˜ì¡´ì„± ì „ë‹¬

```swift
private func moveFruitStore() {
    guard let secondVC = storyboard?.instantiateViewController(withIdentifier: "StockViewController") as? StockViewController else { return }
    secondVC.modalPresentationStyle = .fullScreen
		secondVC.delegate = self
    secondVC.fruitStore = self.fruitStore
    self.present(secondVC, animated: true)
}
```

1. StockViewë¡œ ë¶€í„° fruitStore ê°’ ì „ë‹¬

```swift
extension StoreViewController: StockViewControllerDelegate {
    func stockViewController(_ stockViewController: StockViewController, didUpdateFruit: FruitStore) {
        stockViewController.fruitStore = didUpdateFruit
    }
}
```

1. delegate ì„ ì–¸ ë° ì‚¬ìš©

```swift
final class StockViewController: UIViewController {
	weak var delegate: StockViewControllerDelegate?
	@IBAction func onClickStepper(_ sender: UIStepper) {
		delegate?.stockViewController(self, didUpdateFruit: fruitStore)
  }
}
```

- Delegateë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì°¸ì¡°í•œ ì˜ˆì‹œ ì½”ë“œ
```swift
struct ê³¼ì¼ì¬ê³  {
    var banana: Int
    var apple: Int
}

class MainClass: UIViewController {
    
    var ê³¼ì¼ì¬ê³ : ê³¼ì¼ì¬ê³ !
    var ë¹„ë°€ë²ˆí˜¸: Int!
    
    override func viewDidLoad() {
        super.viewDidLoad()
    }
    
    func ë‹¤ìŒí™”ë©´ë²„íŠ¼ëˆ„ë¦„() {
        let secondVC = SecondClass()
        secondVC.delegate = self
        secondVC.ìˆ˜ì •í• ê³¼ì¼ì¬ê³  = ê³¼ì¼ì¬ê³ 
        
        present(secondVC, animated: true)
    }
    
    func ì ˆëŒ€ì ‘ê·¼í•˜ë©´í°ì¼ë‚˜ëŠ”í•¨ìˆ˜() {
        
    }
}

extension MainClass: SecondClassDelegate {
    func secondClass(_ secondClass: SecondClass, didUpdatedFruit: ê³¼ì¼ì¬ê³ ) {
        // ì—…ë°ì´íŠ¸
        secondClass.ë‚˜ì´
        secondClass.ì´ë¦„
    }
}

import CoreLocation
protocol SecondClassDelegate: AnyObject {
    func secondClass(_ secondClass: SecondClass, didUpdatedFruit: ê³¼ì¼ì¬ê³ )
}
// ARC
// í´ë˜ìŠ¤ -> í™ ì˜ì—­ -> ì¸ìŠ¤í„´ìŠ¤ê°€ ì œê±°ë˜ëŠ” ì‹œì ? -> ARC == 0
// ëˆ„ê°€ ìê¸° ìì‹ ì„ ê°€ë¦¬í‚¬ ë•Œ +1
class SecondClass: UIViewController, CLLocationManagerDelegate {
    var ìˆ˜ì •í• ê³¼ì¼ì¬ê³ : ê³¼ì¼ì¬ê³ !
    var ì´ë¦„: String!
    var ë‚˜ì´: Int!
    
    weak var delegate: SecondClassDelegate?
//    var í™”ë©´: MainClass!
    // ê³¼ì¼ ì¬ê³ ê°€ ìˆ˜ì •ë¬ìŒ
    // ìˆ˜ì •ëœ ì¬ê³ ë¥¼ Mainì— ì–´ë–»ê²Œ ë°˜ì˜í•¨?
    
    // mainì— ê°’ì„ ë„£ì–´ì£¼ëŠ”ê²Œ í•„ìš”í•˜ë‹¤.
    
    func ë°˜ì˜í•˜ëŠ”í•¨ìˆ˜() {
        delegate?.secondClass(self, didUpdatedFruit: ìˆ˜ì •í• ê³¼ì¼ì¬ê³ )
//        í™”ë©´.ê³¼ì¼ì¬ê³  = ìˆ˜ì •í• ê³¼ì¼ì¬ê³ 
//        í™”ë©´.ë¹„ë°€ë²ˆí˜¸
//        í™”ë©´.ì ˆëŒ€ì ‘ê·¼í•˜ë©´í°ì¼ë‚˜ëŠ”í•¨ìˆ˜()
    }
}
```